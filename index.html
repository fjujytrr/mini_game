<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Hide & Seek ‚Äî Premium</title>
<style>
html, body {
  margin:0;
  padding:0;
  font-family:'Inter',sans-serif;
  background:#1a1a1a;
  color:#fff;
  overflow:hidden;
  touch-action:none;
}
body {
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}
/* Header */
header {
  width:95%;
  margin:15px 0;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.level-bar {
  display:flex;
  gap:6px;
  background:#222;
  padding:6px 10px;
  border-radius:12px;
  flex:1;
  justify-content:space-between;
}
.level {
  flex:1;
  text-align:center;
  padding:6px 0;
  font-size:14px;
  font-weight:700;
  color:#555;
  border-radius:8px;
  background:#333;
  transition: all 0.5s ease;
  cursor:pointer;
}
.level.active {
  background:#FFD700;
  color:#000;
  box-shadow:0 0 12px rgba(255,215,0,0.7);
}
/* Coin panel */
.coin-panel {
  display:flex;
  align-items:center;
  gap:8px;
  background:#222;
  padding:8px 16px;
  border-radius:16px;
  box-shadow:0 0 10px rgba(255,215,0,0.4);
}
.coin-panel .val {
  font-weight:700;
  font-size:18px;
  color:#FFD700;
}
#coinLogo {
  width:28px;
  height:28px;
  border-radius:50%;
  object-fit:cover;
  border:1px solid #FFD700;
}
/* House and rooms */
.house {
  position:relative;
  width:95%;
  max-width:480px;
  margin:20px 0;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  grid-template-rows:repeat(4,1fr);
  gap:12px;
}
.room {
  background:linear-gradient(145deg,#2a2a2a,#111);
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:28px;
  cursor:pointer;
  transition: box-shadow 0.25s ease;
  color:#FFD700;
  box-shadow:0 4px 12px rgba(0,0,0,0.5);
}
.room:hover { 
  box-shadow:0 6px 16px rgba(255,215,0,0.4); 
}
.room.selected { 
  border:3px solid #FFD700; 
}
.room.found { border:3px solid #FF4500; box-shadow:0 0 12px #FF4500; }
.room.safe { border:3px solid #10B981; box-shadow:0 0 12px #10B981; }
.room.highlight {
  box-shadow: 0 0 20px 4px #FFD700;
  transition: box-shadow 0.3s ease;
}
/* Controls */
.controls {
  width:90%;
  display:flex;
  justify-content:space-between;
  margin-bottom:15px;
}
button {
  flex:1;
  margin:0 5px;
  padding:14px;
  font-size:20px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  color:#000;
  background:linear-gradient(90deg,#FFD700,#FFC107);
  box-shadow:0 4px 8px rgba(255,215,0,0.4);
  transition: box-shadow 0.2s ease;
}
button:active { 
  box-shadow:0 2px 4px rgba(255,215,0,0.3); 
}
button.secondary {
  background:#2e2e2e;
  color:#FFD700;
  border:1px solid #FFD700;
  box-shadow:0 3px 6px rgba(255,215,0,0.2);
  transition: box-shadow 0.2s ease;
}
/* Bottom menu */
.bottom-menu {
  position:fixed;
  bottom:50px;
  left:50%;
  transform:translateX(-50%);
  width:95%;
  display:flex;
  justify-content:space-around;
  gap:8px;
  background:#111;
  padding:6px 0;
  border-radius:16px;
  box-shadow:0 0 12px rgba(255,215,0,0.3);
  z-index:100;
}
.bottom-menu button {
  flex:1;
  margin:0 4px;
  font-size:22px;
}
/* Powerups panel */
.powerups {
  width: 95%;
  max-width: 480px;
  overflow: hidden;
  margin: 10px 0;
  border-radius: 16px;
  background:#222;
  padding: 10px 0;
}
.powerup-track {
  display: flex;
  gap: 12px;
  transition: transform 0.3s ease;
}
.powerup-card {
  flex: 0 0 70%;
  background: linear-gradient(145deg,#333,#111);
  border-radius: 14px;
  padding: 16px;
  color: #FFD700;
  font-weight: 700;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  text-align: center;
}
.buy-btn {
  margin-top: 12px;
  padding: 8px 12px;
  border: none;
  border-radius: 8px;
  background: linear-gradient(90deg,#FFD700,#FFC107);
  color: #000;
  font-weight: 700;
  cursor: pointer;
}
.buy-btn:disabled {
  opacity: 0.5;
  cursor: default;
}
</style>
</head>
<body>

<header>
  <div class="level-bar">
    <div class="level" data-val="10000">10K</div>
    <div class="level" data-val="50000">50K</div>
    <div class="level" data-val="100000">100K</div>
    <div class="level" data-val="250000">250K</div>
    <div class="level" data-val="500000">500K</div>
    <div class="level" data-val="1000000">1M</div>
    <div class="level" data-val="5000000">5M</div>
  </div>
  <div class="coin-panel">
    <img src="logo.png" alt="Coin" id="coinLogo">
    <div class="val" id="coinsVal">0</div>
  </div>
</header>

<div class="house">
  <div class="room" data-idx="0">+</div>
  <div class="room" data-idx="1">+</div>
  <div class="room" data-idx="2">+</div>
  <div class="room" data-idx="3">+</div>
  <div class="room" data-idx="4">+</div>
  <div class="room" data-idx="5">+</div>
  <div class="room" data-idx="6">+</div>
  <div class="room" data-idx="7">+</div>
</div>

<div class="controls">
  <button id="startBtn">üè†</button>
  <button class="secondary" id="resetBtn">üîç</button>
</div>

<!-- Powerups Panel -->
<div class="banner">
  <div class="powerups">
    <div class="powerup-track" id="powerupTrack">
      <div class="powerup-card" data-effect="x2Prize_x2Loss" data-base-price="20000">
        üî• Reward √ó2 / Loss √ó2 <br>
        Price: <span class="price-text">20,000</span> üí∞
        <button class="buy-btn">Buy</button>
      </div>
      <div class="powerup-card" data-effect="oneRoom_1min" data-base-price="20000">
        ‚è± Hunter checks only 1 room for 1 min <br>
        Price: <span class="price-text">20,000</span> üí∞
        <button class="buy-btn">Buy</button>
      </div>
    </div>
  </div>
</div>

<div class="bottom-menu">
  <button id="infoBtn" class="secondary">‚Ñπ</button>
  <button id="shopBtn" class="secondary">üõí</button>
  <button id="settingsBtn" class="secondary">‚öô</button>
  <button id="profileBtn" class="secondary">üë§</button>
</div>

<script>
const rooms = document.querySelectorAll('.room');
let selectedRoom = null;
let coins = parseInt(localStorage.getItem('coins')) || 0;
const coinsVal = document.getElementById('coinsVal');
coinsVal.textContent = coins;

function updateCoins(val) {
  coins += val;
  localStorage.setItem('coins', coins);
  coinsVal.textContent = coins;
  updateLevels();
}

rooms.forEach(r => {
  r.addEventListener('click', () => {
    rooms.forEach(x => x.classList.remove('selected'));
    r.classList.add('selected');
    selectedRoom = parseInt(r.dataset.idx);
  });
});

document.getElementById('startBtn').addEventListener('click', () => {
  if (selectedRoom === null) { alert('Pick a room first'); return; }
  rooms.forEach(r => r.classList.remove('found','safe'));
  rooms[selectedRoom].classList.add('selected');
});

let activePowerups = {};
let purchaseCounts = {};

function updatePrice(card) {
  const basePrice = parseInt(card.dataset.basePrice);
  const effect = card.dataset.effect;
  const count = purchaseCounts[effect] || 0;
  const price = basePrice * (2 ** count);
  card.querySelector('.price-text').textContent = price.toLocaleString();
  return price;
}

document.querySelectorAll('.buy-btn').forEach(btn => {
  btn.addEventListener('click', (e)=>{
    const card = e.target.closest('.powerup-card');
    const effect = card.dataset.effect;
    const price = updatePrice(card);

    if(coins >= price){
      updateCoins(-price);
      activePowerups[effect] = true;
      purchaseCounts[effect] = (purchaseCounts[effect] || 0) + 1;
      alert(Upgrade "${effect}" purchased! Next purchase will be more expensive.);
      updatePrice(card);
    } else {
      alert('Not enough coins!');
    }
  });
});

function updateLevels() {
  const levels = document.querySelectorAll('.level');
  levels.forEach(l => l.classList.remove('active'));
  for (let i = 0; i < levels.length; i++) {
    if (coins >= parseInt(levels[i].dataset.val)) {
      levels[i].classList.add('active');
    }
  }
}
updateLevels();

document.getElementById('resetBtn').addEventListener('click', () => {
  if (selectedRoom === null) { alert('Pick a room first'); return; }

  let numChecks = 2;
  if(activePowerups['x2Prize_x2Loss']) numChecks = 4;
  if(activePowerups['oneRoom_1min']) numChecks = 1;

  const picks = [...Array(8).keys()].sort(() => 0.5 - Math.random()).slice(0, numChecks);
  rooms.forEach(r => r.classList.remove('found','safe','highlight'));

  let delay = 0;
  picks.forEach(idx => {
    const room = rooms[idx];
    setTimeout(() => { room.classList.add('highlight'); }, delay);
    setTimeout(() => { room.classList.remove('highlight'); }, delay + 600);
    delay += 700;
  });

  setTimeout(() => {
    if (picks.includes(selectedRoom)) {
      let loss = -2000;
      if(activePowerups['x2Prize_x2Loss']) loss *= 2;
      rooms[selectedRoom].classList.add('found');
      updateCoins(loss);
      selectedRoom = null;
      rooms.forEach(r => r.classList.remove('selected'));
    } else {
      let reward = 1000;
      if(activePowerups['x2Prize_x2Loss']) reward *= 2;
      rooms[selectedRoom].classList.add('safe');
      rooms[selectedRoom].classList.add('selected');
      updateCoins(reward);
    }
  }, delay + 700);
});

// Swipe for powerups
const track = document.getElementById('powerupTrack');
let startX = 0;
let currentTranslate = 0;
let prevTranslate = 0;
let maxTranslate = -(track.scrollWidth - track.clientWidth);

track.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
track.addEventListener('touchmove', e => {
  let deltaX = e.touches[0].clientX - startX;
  currentTranslate = prevTranslate + deltaX;
  if(currentTranslate > 0) currentTranslate = 0;
  if(currentTranslate < maxTranslate) currentTranslate = maxTranslate;
  track.style.transform = translateX(${currentTranslate}px);
});
track.addEventListener('touchend', e => { prevTranslate = currentTranslate; });
</script>

</body>
</html>
