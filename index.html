<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Telegram Runner ‚Äî –∫—Ä–∞—Å–∏–≤–∞—è –≤–µ–±-–∏–≥—Ä–∞</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#0f172a; --bg2:#07102a; --glass: rgba(255,255,255,0.06);
  --accent1: #7c3aed; --accent2:#06b6d4; --muted: #9aa4bf;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,var(--bg1),var(--bg2)); color:#e6eef8; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; overflow:hidden;
}
.app{
  width:100%; height:100vh; display:grid; place-items:center; padding:24px;
}
.card{
  width:min(1100px,96vw); height:min(720px,92vh); border-radius:20px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); box-shadow: 0 8px 40px rgba(2,6,23,0.65); padding:18px; display:grid; grid-template-columns: 1fr 360px; gap:18px; backdrop-filter: blur(6px);
}
.left{
  border-radius:14px; overflow:hidden; position:relative; background: radial-gradient(1200px 600px at 10% 20%, rgba(124,58,237,0.08), transparent 8%), radial-gradient(900px 400px at 90% 80%, rgba(6,182,212,0.06), transparent 10%);
}
canvas{display:block; width:100%; height:100%;}
.right{
  padding:18px; display:flex; flex-direction:column; gap:12px;
}
.panel{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }
.huge{font-size:22px; font-weight:700; letter-spacing:-0.5px}
.small{font-size:13px; color:var(--muted)}
.controls{display:flex; gap:8px; margin-top:6px;}
.btn{padding:10px 14px; border-radius:10px; background:linear-gradient(180deg,var(--accent1), #5b21b6); color:white; border:none; cursor:pointer; box-shadow: 0 6px 18px rgba(124,58,237,0.16); font-weight:600}
.btn.secondary{background:transparent; border:1px solid rgba(255,255,255,0.04); color:#cfe8ff}
.row{display:flex; gap:8px; align-items:center}
.stat{font-weight:700; font-size:18px}
.footer{margin-top:auto; font-size:12px; color:var(--muted)}
.badge{background:linear-gradient(90deg,var(--accent2),var(--accent1)); padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px}
.legend{display:flex; gap:8px; flex-wrap:wrap}
.kb{background:rgba(255,255,255,0.02); padding:8px 10px; border-radius:8px; font-weight:600}
/* mobile tweaks */
@media (max-width:980px){
  .card{grid-template-columns: 1fr; height:86vh}
  .right{order:2}
}
</style>
</head>
<body>
<div class="app">
  <div class="card">
    <div class="left panel" id="left">
      <canvas id="game"></canvas>
      <div style="position:absolute; left:12px; top:12px; display:flex; gap:8px; align-items:center;">
        <div class="badge" id="badge">Telegram Runner</div>
      </div>
    </div>
    <div class="right">
      <div class="panel">
        <div class="huge">Telegram Runner ‚Äî –±–µ–≥—É–Ω —á–µ—Ä–µ–∑ –æ–±–ª–∞–∫–∞ ‚ú®</div>
        <div class="small">–ê—Ä–∫–∞–¥–Ω–∞—è –∏–≥—Ä–∞: –ø—Ä—ã–≥–∞–π, —É–∫–ª–æ–Ω—è–π—Å—è, —Å–æ–±–∏—Ä–∞–π —Å—Ç–∏–∫–µ—Ä—ã –∏ –ø–æ–±–µ–∂–¥–∞–π —Ä–µ–∫–æ—Ä–¥—ã.</div>
        <div style="height:12px"></div>
        <div class="row">
          <div style="flex:1">
            <div class="small">–ò–≥—Ä–æ–∫</div>
            <input id="playerName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" style="width:100%; margin-top:6px; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit" />
          </div>
          <div style="width:120px">
            <div class="small">–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</div>
            <div style="margin-top:6px" class="stat" id="level">1</div>
          </div>
        </div>
        <div style="height:10px"></div>
        <div style="display:flex; gap:8px; align-items:center">
          <button id="startBtn" class="btn">–ò–≥—Ä–∞—Ç—å</button>
          <button id="pauseBtn" class="btn secondary">–ü–∞—É–∑–∞</button>
          <button id="shareBtn" class="btn secondary">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
      </div>

      <div class="panel">
        <div class="small">–†–µ–∫–æ—Ä–¥</div>
        <div class="row" style="justify-content:space-between; align-items:center; margin-top:8px">
          <div>
            <div class="stat" id="bestScore">0</div>
            <div class="small">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
          </div>
          <div>
            <div class="stat" id="score">0</div>
            <div class="small">–¢–µ–∫—É—â–∏–µ –æ—á–∫–∏</div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="small">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
        <div class="controls" style="margin-top:8px">
          <div class="kb">–ü—Ä–æ–±–µ–ª ‚Äî –ü—Ä—ã–∂–æ–∫</div>
          <div class="kb">–ö–ª–∏–∫/–¢–∞–ø ‚Äî –î–≤–æ–π–Ω–æ–π –ø—Ä—ã–∂–æ–∫</div>
          <div class="kb">‚Üê/‚Üí ‚Äî –í–Ω–∏–∑/–í–≤–µ—Ä—Ö (—Å–∫–æ–ª—å–∑–∏—Ç—å/—É—Å–∫–æ—Ä–µ–Ω–∏–µ)</div>
        </div>
        <div style="height:10px"></div>
        <div class="small">–ü–æ–¥—Å–∫–∞–∑–∫–∏</div>
        <div class="legend" style="margin-top:8px">
          <div class="kb">‚≠ê –°—Ç–∏–∫–µ—Ä: +10</div>
          <div class="kb">üí£ –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ: -</div>
          <div class="kb">üåÄ –ë–æ–Ω—É—Å: —â–∏—Ç</div>
        </div>
      </div>

      <div class="panel" id="helpPanel">
        <div class="small">–û–ø–∏—Å–∞–Ω–∏–µ</div>
        <div style="margin-top:8px; color:var(--muted); font-size:13px">–ë–µ–≥–∏—Ç–µ –ø–æ –Ω–µ–±—É, —Å–æ–±–∏—Ä–∞–π—Ç–µ —Å—Ç–∏–∫–µ—Ä—ã, –∏–∑–±–µ–≥–∞–π—Ç–µ –æ–±–ª–∞—á–Ω—ã—Ö —Ç—É–º–∞–Ω–Ω–æ—Å—Ç–µ–π –∏ –≤—Ä–∞–≥–æ–≤. –ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å: —Å–∫–æ—Ä–æ—Å—Ç—å, —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤ –º–µ–Ω—è—é—Ç—Å—è —Å –∫–∞–∂–¥—ã–º —É—Ä–æ–≤–Ω–µ–º.</div>
      </div>

      <div class="footer">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: localStorage ‚Ä¢ –î–ª—è GitHub Pages —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –∫–∞–∫ <code>index.html</code> –∏ –≤–∫–ª—é—á–∏—Ç–µ Pages –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.</div>
    </div>
  </div>
</div>

<script>
/*
  Telegram Runner
  Single-file HTML5 game with canvas, particles, procedural art and sound (WebAudio)
  Russian UI. Drop into index.html and host.
*/

// Utility helpers
const qs = (s)=>document.querySelector(s);
const $start = qs('#startBtn');
const $pause = qs('#pauseBtn');
const $share = qs('#shareBtn');
const $canvas = qs('#game');
const $playerName = qs('#playerName');
const $score = qs('#score');
const $best = qs('#bestScore');
const $level = qs('#level');

// canvas setup
const DPR = Math.max(1, window.devicePixelRatio || 1);
const ctx = $canvas.getContext('2d');
let W, H;
function resize(){
  W = $canvas.clientWidth; H = $canvas.clientHeight;
  $canvas.width = Math.floor(W*DPR);
  $canvas.height = Math.floor(H*DPR);
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
window.addEventListener('resize', resize);
resize();

// Game variables
let running = false, paused = false, lastTime = 0, accum = 0;
let gameSpeed = 220; // px/s base
let gravity = 1600;
let player = null;
let entities = [];
let particles = [];
let score = 0;
let best = parseInt(localStorage.getItem('tgRunner_best')||0,10)||0;
$best.textContent = best;
let level = 1;
let difficultyTimer = 0;
let spawnTimer = 0;
let audioCtx = null;
let sounds = {};

// Input
const input = {left:false,right:false,space:false,mouse:false,tap:false};
window.addEventListener('keydown', (e)=>{
  if(e.code==='Space'){ input.space = true; e.preventDefault(); }
  if(e.code==='ArrowLeft') input.left = true;
  if(e.code==='ArrowRight') input.right = true;
  if(e.code==='KeyP') togglePause();
});
window.addEventListener('keyup', (e)=>{
  if(e.code==='Space') input.space = false;
  if(e.code==='ArrowLeft') input.left = false;
  if(e.code==='ArrowRight') input.right = false;
});
$canvas.addEventListener('pointerdown',(e)=>{ input.mouse = true; input.tap = true; setTimeout(()=>input.tap=false,150); });

// Simple sound maker (WebAudio) ‚Äî small library
function ensureAudio(){
  if(!audioCtx){ try{ audioCtx = new (window.AudioContext||window.webkitAudioContext)(); }catch(e){ audioCtx = null; }}
}
function beep(freq, type='sine', time=0.06, vol=0.12){
  ensureAudio(); if(!audioCtx) return;
  const o = audioCtx.createOscillator(); const g = audioCtx.createGain(); o.type = type; o.frequency.value = freq; g.gain.value = vol; o.connect(g); g.connect(audioCtx.destination); o.start(); g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + time); o.stop(audioCtx.currentTime + time + 0.02);
}

// Entities: player, obstacles, collectables
class Entity{
  constructor(x,y,w,h){ this.x=x; this.y=y; this.w=w; this.h=h; this.vx=0; this.vy=0; this.type='generic'; this.ttl=null; }
  update(dt){ this.x += this.vx*dt; this.y += this.vy*dt; if(this.ttl!==null){ this.ttl -= dt; if(this.ttl<=0) this.dead = true; }}
  draw(ctx){ ctx.fillStyle='white'; ctx.fillRect(this.x,this.y,this.w,this.h); }
  collides(other){ return !(this.x+this.w < other.x || this.x > other.x+other.w || this.y+this.h < other.y || this.y > other.y+other.h); }
}

// player creation
function createPlayer(){
  const p = new Entity(100, H*0.6, 56, 56);
  p.type='player'; p.vx=0; p.vy=0; p.onGround=false; p.doubleJump=true; p.shield=0; p.animTime=0;
  p.draw = function(c){
    // body
    c.save(); c.translate(this.x+this.w/2, this.y+this.h/2);
    // subtle bob
    const bob = Math.sin(this.animTime*8)*4;
    c.translate(0,bob);
    // rounded player - draw chat bubble like avatar
    const r = this.w/2;
    c.beginPath(); c.ellipse(0,-6,r,r*0.85,0,0,Math.PI*2);
    c.fillStyle = 'rgba(255,255,255,0.06)'; c.fill();
    c.beginPath(); c.moveTo(-r*0.6, r*0.1); c.quadraticCurveTo(0,r*1.2,r*0.5,r*0.1); c.fillStyle = 'white'; c.fill();
    // icon
    c.font = '30px Inter'; c.textAlign='center'; c.textBaseline='middle'; c.fillStyle = '#0d1226'; c.fillText('‚úàÔ∏è', -2, -8);
    // shield
    if(this.shield>0){ c.strokeStyle = 'rgba(6,182,212,0.9)'; c.lineWidth=3; c.beginPath(); c.arc(0,-6,r*0.95,0,Math.PI*2); c.stroke(); }
    c.restore();
  };
  return p;
}

// spawn obstacles and collectables
function spawnObstacle(){
  const size = 36 + Math.random()*60*(1+level*0.12);
  const y = H*0.55 + (Math.random()*0.4-0.15)*H;
  const e = new Entity(W + 60, y, size, size);
  e.vx = -gameSpeed*(0.75 + Math.random()*0.8 + level*0.06);
  e.type='obstacle'; e.color='#ffb4b4';
  e.draw = function(c){ c.save(); c.translate(this.x,this.y); c.fillStyle = '#ff6b6b'; c.beginPath(); c.moveTo(this.w/2,0); for(let i=0;i<6;i++){ const a=i/6*Math.PI*2; const r=this.w/2*(1+0.12*Math.sin(i)); c.lineTo(this.w/2+Math.cos(a)*r, this.h/2+Math.sin(a)*r); } c.closePath(); c.fill(); c.restore(); };
  entities.push(e);
}
function spawnSticker(){
  const size = 28;
  const y = H*0.35 + (Math.random()*0.6-0.1)*H;
  const e = new Entity(W + 40, y, size, size);
  e.vx = -gameSpeed*(0.6 + Math.random()*0.5 + level*0.05);
  e.type='sticker'; e.value = 10; e.draw = function(c){ c.save(); c.translate(this.x,this.y); c.font = this.w+'px Inter'; c.textBaseline='top'; c.fillText('‚≠ê',0,0); c.restore(); };
  entities.push(e);
}
function spawnBonus(){
  const size = 44;
  const y = H*0.4 + (Math.random()*0.6-0.2)*H;
  const e = new Entity(W + 40, y, size, size); e.vx = -gameSpeed*0.5; e.type='bonus'; e.ttl=8; e.draw=function(c){ c.save(); c.translate(this.x,this.y); c.beginPath(); c.rect(0,0,this.w,this.h); c.fillStyle='rgba(255,255,255,0.02)'; c.fill(); c.font='26px Inter'; c.fillText('üõ°Ô∏è',0+2,0+4); c.restore(); };
  entities.push(e);
}

// Particles
function spawnParticles(x,y,n,cols){ for(let i=0;i<n;i++){ particles.push({x:x+Math.random()*20-10, y:y+Math.random()*20-10, vx:(Math.random()-0.5)*260, vy:(Math.random()-0.9)*260, life:0.6+Math.random()*0.6, col: cols?cols[Math.floor(Math.random()*cols.length)] : '#fff', size:2+Math.random()*3}); }}

// Game reset
function resetGame(){
  entities = []; particles = []; player = createPlayer(); score = 0; level = 1; gameSpeed = 220; difficultyTimer=0; spawnTimer=0; $score.textContent = 0; $level.textContent = 1; $badge.textContent = 'Telegram Runner';
}
resetGame();

// Main update loop
function update(dt){
  if(paused) return;
  // increase difficulty
  difficultyTimer += dt; if(difficultyTimer>10){ difficultyTimer=0; level++; gameSpeed *= 1.06; $level.textContent = level; }
  // spawn entities
  spawnTimer -= dt; if(spawnTimer<=0){ spawnTimer = 0.4 + Math.random()*0.65 - Math.min(level*0.02,0.3); // dynamic spawn
    const r = Math.random(); if(r<0.52) spawnSticker(); else if(r<0.86) spawnObstacle(); else spawnBonus(); }

  // update player physics
  player.animTime += dt;
  player.vy += gravity*dt;
  player.y += player.vy*dt;
  // ground and ceiling
  const ground = H*0.72; const ceiling = 16;
  if(player.y + player.h > ground){ player.y = ground - player.h; player.vy = 0; player.onGround = true; player.doubleJump = true; }
  if(player.y < ceiling){ player.y = ceiling; player.vy = 0; }

  // controls: jump
  if((input.space || input.tap) && player.onGround){ player.vy = -760; player.onGround = false; player.doubleJump = true; beep(720, 'sine', 0.08, 0.08); input.space=false; }
  else if((input.space || input.tap) && !player.onGround && player.doubleJump){ player.vy = -640; player.doubleJump=false; spawnParticles(player.x+player.w/2, player.y+player.h/2, 14, ['#fef3c7','#ffd7a6','#fff6c2']); beep(940,'triangle',0.08,0.08); input.space=false; }
  // left/right minor move
  if(input.left){ player.y += 120*dt; }
  if(input.right){ player.y -= 120*dt; }

  // update entities
  for(let e of entities){ e.update(dt); }
  // collision checks
  for(let i=entities.length-1;i>=0;i--){ const e=entities[i];
    if(e.x + e.w < -60 || e.x > W+200){ entities.splice(i,1); continue; }
    if(e.collides(player)){
      if(e.type==='sticker'){
        score += e.value; spawnParticles(e.x+e.w/2, e.y+e.h/2, 12, ['#fff9c4','#c8facd','#a5d8ff']); beep(1200,'sine',0.08,0.08);
        entities.splice(i,1);
      } else if(e.type==='bonus'){
        player.shield = 6; entities.splice(i,1); beep(400,'sine',0.12,0.08);
      } else if(e.type==='obstacle'){
        if(player.shield>0){ player.shield=0; spawnParticles(e.x+e.w/2,e.y+e.h/2,18,['#cfefff','#c3fef0']); beep(240,'sawtooth',0.12,0.08); entities.splice(i,1);} else {
          // hit -> game over
          running = false; beep(140,'sine',0.32,0.14); spawnEmitDeath(player.x+player.w/2,player.y+player.h/2);
          if(score>best){ best=score; localStorage.setItem('tgRunner_best',best); $best.textContent = best; }
          $start.textContent = '–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞';
        }
      }
    }
  }

  // update particles
  for(let i=particles.length-1;i>=0;i--){ const p=particles[i]; p.life -= dt; if(p.life<=0){ particles.splice(i,1); } else { p.x += p.vx*dt; p.y += p.vy*dt; p.vy += 1200*dt; p.vx *= 0.995; } }

  // scoring over time
  score += Math.max(0, Math.floor(dt*gameSpeed*0.02)); $score.textContent = score;
}

function spawnEmitDeath(x,y){ spawnParticles(x,y,28,['#ff7b7b','#ffd1d1','#ffefef']); for(let i=0;i<6;i++){ const e=new Entity(x-20 + i*6, y-20 + i*5, 12, 12); e.type='gibb'; e.vx = (Math.random()-0.5)*560; e.vy = -Math.random()*400; e.ttl=1.6; e.draw = function(c){ c.save(); c.translate(this.x,this.y); c.fillStyle='#fff'; c.fillRect(0,0,this.w,this.h); c.restore(); }; entities.push(e);} }

// render
function render(){
  // clear
  ctx.clearRect(0,0,W,H);
  // background gradient sky
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0,'#07122e'); g.addColorStop(1,'#03233d'); ctx.fillStyle=g; ctx.fillRect(0,0,W,H);

  // parallax clouds
  drawClouds(ctx);

  // draw entities
  for(const e of entities){ e.draw(ctx); }
  // draw player
  if(player) player.draw(ctx);

  // draw particles
  for(const p of particles){ ctx.globalAlpha = Math.max(0, Math.min(1,p.life)); ctx.fillStyle = p.col; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill(); }
  ctx.globalAlpha = 1;

  // HUD overlay: health/shield
  drawHUD(ctx);
}

// clouds procedural
let cloudSeed = Math.random()*9999; function drawClouds(c){ const t = performance.now()*0.0002; const count = 10; for(let i=0;i<count;i++){ const cx = (i*0.9 + (t*0.05*(i%2?1:-1)))%2*W - W*0.15*i%W; const py = (0.08 + i%3*0.06)*H + Math.sin(t*0.6 + i)*40; const scale = 0.6 + (i%4)/3; drawCloud(c, cx, py, scale); } }
function drawCloud(c,x,y,s){ c.save(); c.globalAlpha = 0.18*s; c.fillStyle = 'white'; c.beginPath(); c.ellipse(x, y, 120*s, 46*s, 0,0,Math.PI*2); c.ellipse(x+60*s, y-10*s, 84*s,34*s,0,0,Math.PI*2); c.ellipse(x-56*s, y+6*s, 72*s,34*s,0,0,Math.PI*2); c.fill(); c.restore(); }

function drawHUD(c){ // bottom gradient bar
  c.save(); const h=68; c.fillStyle='rgba(3,5,20,0.4)'; c.fillRect(0,H-h,W,h);
  // score text
  c.font='18px Inter'; c.fillStyle='rgba(255,255,255,0.9)'; c.fillText('–°—á—ë—Ç: '+score, 14, H-34); c.fillStyle='rgba(255,255,255,0.5)'; c.fillText('–£—Ä–æ–≤–µ–Ω—å: '+level, 14, H-14);
  // small player name
  const name = ($playerName.value||'–ò–≥—Ä–æ–∫'); c.textAlign='right'; c.fillStyle='rgba(255,255,255,0.9)'; c.fillText(name, W-16, H-34);
  c.restore(); }

// main loop
function loop(ts){ if(!lastTime) lastTime = ts; const dt = Math.min(1/30, (ts-lastTime)/1000); lastTime = ts; if(running){ update(dt); render(); } else { // show paused/landing screen with subtle animation
     render(); drawLanding(); }
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

function drawLanding(){ ctx.save(); ctx.fillStyle='rgba(2,6,23,0.45)'; ctx.fillRect(0,0,W,H); ctx.fillStyle='rgba(255,255,255,0.02)'; ctx.fillRect(0,H*0.56,W, H*0.44);
  ctx.fillStyle='white'; ctx.font='28px Inter'; ctx.textAlign='center'; ctx.fillText(running? '': '–ù–∞–∂–º–∏—Ç–µ ¬´–ò–≥—Ä–∞—Ç—å¬ª –∏–ª–∏ –ø—Ä–æ–±–µ–ª', W/2, H*0.36); ctx.font='14px Inter'; ctx.fillStyle='rgba(255,255,255,0.6)'; ctx.fillText('–°–æ–±–∏—Ä–∞–π—Ç–µ —Å—Ç–∏–∫–µ—Ä—ã, —É–∫–ª–æ–Ω—è–π—Ç–µ—Å—å –æ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∏ —Å—Ç–∞–≤—å—Ç–µ —Ä–µ–∫–æ—Ä–¥—ã!', W/2, H*0.42); ctx.restore(); }

// controls for buttons
$start.addEventListener('click', ()=>{ if(!running){ startGame(); } else { resetGame(); startGame(); } });
$pause.addEventListener('click', ()=>{ togglePause(); });
$share.addEventListener('click', ()=>{ const txt = `–ú–æ–π —Ä–µ–∫–æ—Ä–¥: ${best} –≤ Telegram Runner!`; if(navigator.share){ navigator.share({title:'Telegram Runner', text:txt, url:location.href}).catch(()=>{});} else { navigator.clipboard.writeText(txt); alert('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!'); } });

function startGame(){ if(!audioCtx) ensureAudio(); running = true; paused = false; lastTime = performance.now(); $start.textContent='–ò–≥—Ä–∞ –∏–¥—ë—Ç...'; resetScoreWhenStart(); }
function resetScoreWhenStart(){ if(score>0) score=0; }
function togglePause(){ paused = !paused; $pause.textContent = paused? '–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å' : '–ü–∞—É–∑–∞'; }

// Game loop for ticks (spawn etc) handled by update

// initial demo content: animate a slow cloud and some stickers
(function preloadDemo(){
  for(let i=0;i<6;i++){ spawnSticker(); }
})();

// save name to localStorage
$playerName.addEventListener('change', ()=>{ localStorage.setItem('tgRunner_name', $playerName.value); }); $playerName.value = localStorage.getItem('tgRunner_name') || '';

// responsive hub: when user focuses out, pause automatically
window.addEventListener('blur', ()=>{ if(running) { paused=true; $pause.textContent='–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å'; } });

// Accessibility: small touch tutorial on first run
if(!localStorage.getItem('tgRunner_seen')){ localStorage.setItem('tgRunner_seen','1'); setTimeout(()=>{ alert('–ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –Ω–∞–∂–º–∏—Ç–µ –ø–æ —ç–∫—Ä–∞–Ω—É –¥–ª—è –¥–≤–æ–π–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞.'); },600); }

// tiny autotune to keep canvas sized correctly on load
setTimeout(resize,200);

</script>
</body>
</html>
