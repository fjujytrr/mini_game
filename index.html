<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hide & Seek ‚Äî Casino Arcade</title>
<style>
  /* ========== –ü–∞–ª–∏—Ç—Ä–∞ ========== */
  :root{
    --bg-1:#0f0f10;       /* –ø–æ—á—Ç–∏ —á—ë—Ä–Ω—ã–π */
    --bg-2:#151515;
    --panel:#111111;
    --gold:#FFD700;
    --green:#10B981;
    --danger:#FF4500;
    --blue:#3B82F6;
    --muted:#bdbdbd;
    --glass: rgba(255,255,255,0.03);
  }

  /* ========== –ë–∞–∑–æ–≤–∞—è —Å–µ—Ç–∫–∞ ========== */
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto; background:
    radial-gradient(1200px 600px at 10% 10%, rgba(255,215,0,0.02), transparent 5%),
    linear-gradient(180deg,var(--bg-1),var(--bg-2));
    color:var(--muted); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  body{display:flex;flex-direction:column;align-items:center;gap:12px;padding:18px 12px 90px;}

  /* ========== Header ========== */
  header{
    width:100%;max-width:980px;display:flex;gap:12px;align-items:center;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
    border-radius:14px;padding:12px;
    box-shadow: 0 6px 24px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    border:1px solid rgba(255,215,0,0.04);
  }

  .level-bar{flex:1;display:flex;gap:8px;align-items:center}
  .level{
    flex:1;text-align:center;padding:8px 6px;border-radius:10px;font-weight:700;font-size:13px;
    background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(0,0,0,0.06));
    color:var(--muted);border:1px solid rgba(255,255,255,0.02);
    box-shadow: 0 6px 18px rgba(0,0,0,0.6);
    transition:all .22s;cursor:pointer;
  }
  .level.active{
    background: linear-gradient(180deg, rgba(255,215,0,0.12), rgba(255,215,0,0.02));
    color:#111;border-color:rgba(255,215,0,0.3);
    box-shadow: 0 10px 30px rgba(255, 215, 0, 0.08), 0 2px 6px rgba(0,0,0,0.6);
  }

  .coin-panel{
    display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.08));
    border:1px solid rgba(255,215,0,0.04);
    box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  }
  .coin-panel .val{font-weight:900;color:var(--gold);font-size:18px;letter-spacing:0.6px}

  /* ========== Main house grid ========== */
  .house{
    width:100%;max-width:980px;display:grid;
    grid-template-columns: 1fr 420px; gap:16px;
  }

  /* left: rooms panel */
  .rooms-wrap{background:var(--panel);padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,0.02);
    box-shadow: 0 12px 30px rgba(0,0,0,0.6);}
  .rooms-grid{display:grid;grid-template-columns:repeat(2,1fr);grid-auto-rows:88px;gap:12px}
  .room{
    display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:800;color:#eee;
    border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
    border:2px solid rgba(255,255,255,0.02);cursor:pointer;transition:all .22s;
    box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  }
  .room:hover{transform:translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.7)}
  .room.selected{border-color:var(--blue); box-shadow: 0 10px 30px rgba(59,130,246,0.08); color:var(--blue); background: linear-gradient(180deg, rgba(59,130,246,0.04), rgba(255,255,255,0.006))}
  .room.found{border-color:var(--danger); color:var(--danger); box-shadow: 0 10px 30px rgba(255,69,0,0.06)}
  .room.safe{border-color:var(--green); color:var(--green); box-shadow: 0 10px 30px rgba(16,185,129,0.06)}

  /* right: sidebar with miners / upgrades panels */
  .sidebar{display:flex;flex-direction:column;gap:12px}
  .panel{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.06));
    border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.02);
    box-shadow: 0 12px 30px rgba(0,0,0,0.6);
    min-height:120px;
  }
  .panel h3{margin:0 0 8px;color:var(--gold);font-size:14px}

  /* miners list on main screen */
  .miners-panel{display:flex;flex-direction:column;gap:8px}
  .miner-row{display:flex;gap:8px;align-items:center}
  .miner-card{
    flex:1;display:flex;flex-direction:column;align-items:flex-start;gap:6px;padding:10px;border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.08));
    border:1px solid rgba(255,255,255,0.02);
    box-shadow: 0 8px 20px rgba(0,0,0,0.55);cursor:pointer;transition:all .18s;
  }
  .miner-card:hover{transform:translateY(-6px);box-shadow:0 18px 36px rgba(0,0,0,0.7)}
  .miner-card h4{margin:0;color:var(--blue)}
  .miner-card .income{font-weight:700;color:var(--green)}
  .miner-card .price{font-weight:900;color:var(--gold);align-self:flex-end}

  /* controls & bottom menu */
  .controls{display:flex;gap:8px;margin-top:8px}
  .btn{
    flex:1;padding:12px;border-radius:12px;border:none;font-weight:800;font-size:16px;cursor:pointer;
    background: linear-gradient(180deg, rgba(255,215,0,0.06), rgba(255,215,0,0.02));
    color:#000;box-shadow: 0 10px 28px rgba(0,0,0,0.6);
  }
  .btn.secondary{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.04)}
  .bottom-menu{
    position:fixed;left:50%;transform:translateX(-50%);bottom:22px;width:96%;max-width:560px;
    display:flex;justify-content:space-around;gap:8px;background:var(--panel);padding:8px;border-radius:999px;
    box-shadow:0 12px 30px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.02)
  }
  .bottom-menu button{background:transparent;border:none;color:var(--muted);font-size:20px;cursor:pointer;padding:8px 12px;border-radius:10px}
  .bottom-menu button:hover{color:var(--gold);background:rgba(255,215,0,0.03)}

  /* upgrade cards (hidden initially) */
  .upgrade-panel{display:none;gap:10px;flex-direction:column}
  .upgrade{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.06));border:1px solid rgba(255,255,255,0.02)}
  .upgrade h4{margin:0;color:var(--gold)} .upgrade p{margin:6px 0;color:var(--muted)} .upgrade .price{color:var(--gold);font-weight:900}

  /* modal mining shop (dark premium style) */
  .modal{
    display:none;position:fixed;inset:0;align-items:center;justify-content:center;z-index:9999;
    background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.75));
  }
  .modal .sheet{
    width:92%;max-width:900px;border-radius:14px;padding:18px;background:linear-gradient(180deg,#141414,#0d0d0d);
    border:1px solid rgba(255,215,0,0.04);box-shadow: 0 30px 80px rgba(0,0,0,0.8);
  }
  .modal .sheet h2{margin:0 0 12px;color:var(--gold)}
  .modal .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
  .modal .grid .miner-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));color:#fff}

  /* buy confirm */
  .confirm{display:none;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:10000;padding:14px;border-radius:12px;background:#0b0b0b;border:1px solid rgba(255,215,0,0.06)}
  .confirm p{color:var(--muted);margin:0 0 12px} .confirm .row{display:flex;gap:8px}

  /* responsive */
  @media (max-width:900px){
    .house{grid-template-columns:1fr; }
    .sidebar{order:2}
  }
</style>
</head>
<body>

<header>
  <div class="level-bar">
    <div class="level" data-val="10000">10K</div>
    <div class="level" data-val="50000">50K</div>
    <div class="level" data-val="100000">100K</div>
    <div class="level" data-val="250000">250K</div>
    <div class="level" data-val="500000">500K</div>
    <div class="level" data-val="1000000">1M</div>
    <div class="level" data-val="5000000">5M</div>
  </div>
  <div class="coin-panel">
    <div style="font-size:12px;color:var(--muted)">Balance</div>
    <div class="val" id="coinsVal">0</div>
  </div>
</header>

<main class="house">
  <section class="rooms-wrap">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
      <strong style="color:var(--gold)">Rooms</strong>
      <div style="font-size:12px;color:var(--muted)">Pick one then üîç</div>
    </div>
    <div class="rooms-grid" id="roomsGrid"></div>

    <div class="controls" style="margin-top:12px">
      <button id="startBtn" class="btn">üè†</button>
      <button id="resetBtn" class="btn secondary">üîç</button>
    </div>
  </section>

  <aside class="sidebar">
    <div class="panel">
      <h3>Mining Income</h3>
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="font-size:20px;font-weight:800;color:var(--green)" id="miningIncomeVal">0</div>
        <div style="font-size:12px;color:var(--muted)">/hr</div>
      </div>
    </div>

    <div class="panel">
      <h3 style="display:flex;justify-content:space-between;align-items:center">
        <span style="color:var(--gold)">Miners</span>
        <small style="color:var(--muted)">Main screen</small>
      </h3>

      <!-- visible miners on main screen -->
      <div id="minersPanelVisible" class="miners-panel"></div>

      <!-- upgrades container (hidden by default) -->
      <div id="upgradePanel" class="upgrade-panel" style="margin-top:10px"></div>
    </div>

  </aside>
</main>

<!-- modal mining shop (opens by ‚õè button) -->
<div class="modal" id="miningModal">
  <div class="sheet">
    <h2>Mining Shop</h2>
    <div style="margin-bottom:10px;color:var(--muted)">Beautiful dark premium design ‚Äî buy miners here.</div>
    <div class="grid" id="modalMinersGrid"></div>
    <div style="display:flex;gap:8px;margin-top:12px">
      <button id="closeMiningShop" class="btn secondary" style="flex:1">Close</button>
    </div>
  </div>
</div>

<!-- buy confirm (tiny) -->
<div class="confirm" id="buyConfirm">
  <p id="buyText">Buy?</p>
  <div class="row">
    <button id="confirmBuy" class="btn">Buy</button>
    <button id="cancelBuy" class="btn secondary">Cancel</button>
  </div>
</div>

<!-- bottom menu -->
<nav class="bottom-menu">
  <button id="infoBtn">‚Ñπ</button>
  <button id="shopBtn">üõí</button>
  <button id="miningBtn">‚õè</button>
  <button id="profileBtn">üë§</button>
</nav>

<script>
/* ========== –õ–æ–≥–∏–∫–∞ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–∂–Ω–µ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É) ========== */

/* --- init rooms --- */
const roomsGrid = document.getElementById('roomsGrid');
for(let i=0;i<8;i++){
  const d=document.createElement('div');
  d.className='room'; d.dataset.idx=i; d.textContent='+';
  roomsGrid.appendChild(d);
}

/* --- state --- */
let selectedRoom=null;
let coins = +localStorage.getItem('coins')||0;
let maxCoins = +localStorage.getItem('maxCoins')||coins;
const coinsVal = document.getElementById('coinsVal');
let upgrades = JSON.parse(localStorage.getItem('upgrades')) || { x2Prize:0, check1:0 };
let check1Expire = +localStorage.getItem('check1Expire') || 0;
let roundInProgress=false;

/* miners data */
const minersData = [
  {n:"Miner 1", i:500, p:7000},
  {n:"Miner 2", i:1788, p:12000},
  {n:"Miner 3", i:2358, p:15000},
  {n:"Miner 4", i:3000, p:20000},
  {n:"Miner 5", i:4500, p:25000},
  {n:"Miner 6", i:5200, p:30000},
  {n:"Miner 7", i:6100, p:35000},
  {n:"Miner 8", i:7200, p:40000},
  {n:"Miner 9", i:8500, p:45000},
  {n:"Miner 10",i:9500, p:50000},
];
let minersState = JSON.parse(localStorage.getItem('minersState')) || minersData.map(_=>({count:0}));

const minersPanelVisible = document.getElementById('minersPanelVisible');
const modalMinersGrid = document.getElementById('modalMinersGrid');

function format(n){
  return n>=1e9 ? (n/1e9).toFixed(1).replace(/\.0$/,'')+'B' :
         n>=1e6 ? (n/1e6).toFixed(1).replace(/\.0$/,'')+'M' :
         n>=1e3 ? (n/1e3).toFixed(1).replace(/\.0$/,'')+'K' : n;
}

function save(){
  localStorage.setItem('coins', coins);
  localStorage.setItem('maxCoins', maxCoins);
  localStorage.setItem('upgrades', JSON.stringify(upgrades));
  localStorage.setItem('check1Expire', check1Expire);
  localStorage.setItem('minersState', JSON.stringify(minersState));
  localStorage.setItem('lastTime', Date.now());
}

/* update coins and UI */
function updCoins(v=0){
  coins += v;
  if(coins<0) coins=0;
  if(coins>maxCoins) maxCoins=coins;
  coinsVal.textContent = format(coins);
  updLv();
  updUpg();
  updIncome();
  save();
}

/* income calculation */
function getIncome(){
  return minersState.reduce((sum,m,i)=> sum + (m.count>0 ? minersData[i].i * Math.pow(2, m.count-1) : 0), 0);
}
function updIncome(){ document.getElementById('miningIncomeVal').textContent = format(getIncome()); }

/* offline earnings */
(function addOffline(){
  const last = +localStorage.getItem('lastTime') || Date.now();
  const now = Date.now();
  const diff = (now - last)/60000;
  if(diff>0) updCoins(Math.floor(getIncome()/60 * diff));
  localStorage.setItem('lastTime', Date.now());
})();

/* passive tick */
setInterval(()=>{ updCoins(Math.floor(getIncome()/3600)); },1000);

/* levels display */
function updLv(){
  document.querySelectorAll('.level').forEach(l=> l.classList.toggle('active', maxCoins >= +l.dataset.val));
}

/* upgrades UI */
function updUpg(){
  const el = document.getElementById('upgradePanel');
  el.innerHTML = '';
  const ups = [
    {key:'x2Prize', title:'x2 Prize / x2 Loss', desc:'Double rewards & penalties', base:20000},
    {key:'check1', title:'Check 1 Room Only', desc:'Hunter checks 1 room only (1 min)', base:20000}
  ];
  ups.forEach(u=>{
    const div=document.createElement('div'); div.className='upgrade';
    const price = u.base * Math.pow(2, upgrades[u.key]||0);
    div.innerHTML = `<h4>${u.title}</h4><p>${u.desc}</p><div style="display:flex;justify-content:space-between;align-items:center"><div class="price">${format(price)}</div><div style="font-size:12px;color:var(--muted)">${upgrades[u.key]||0} lvl</div></div>`;
    div.onclick = ()=>{
      if(coins>=price){
        upgrades[u.key] = (upgrades[u.key]||0)+1;
        updCoins(-price);
        if(u.key==='check1') check1Expire = Date.now()+60000;
        save(); updUpg();
      } else alert('Not enough coins!');
    };
    el.appendChild(div);
  });
}

/* check1 timer */
setInterval(()=>{
  const el = document.querySelector('.upgrade .timer') || null;
  // we show timer separately below when upgradePanel visible
  // logic in updUpg handled purchases
},1000);

/* rooms click */
document.querySelectorAll('.room').forEach(r=>{
  r.onclick = ()=> {
    if(roundInProgress) return;
    document.querySelectorAll('.room').forEach(x=>x.classList.remove('selected'));
    r.classList.add('selected');
    selectedRoom = +r.dataset.idx;
  };
});

/* start/reset buttons */
document.getElementById('startBtn').onclick = ()=>{
  if(selectedRoom==null){ alert('Pick a room first!'); return; }
  document.querySelectorAll('.room').forEach(r=> r.classList.remove('found','safe'));
};
document.getElementById('resetBtn').onclick = ()=>{
  if(selectedRoom==null){ alert('Pick a room first!'); return; }
  roundInProgress=true;
  const numPicks = (check1Expire>Date.now())?1:2;
  let picks = [...Array(8).keys()].sort(()=>0.5 - Math.random()).slice(0,numPicks);
  document.querySelectorAll('.room').forEach(r=> r.classList.remove('found','safe','highlight'));
  let delay=0;
  picks.forEach(i=>{
    const room = document.querySelector(`.room[data-idx="${i}"]`);
    setTimeout(()=> room.classList.add('highlight'), delay);
    setTimeout(()=> room.classList.remove('highlight'), delay+600);
    delay+=700;
  });
  setTimeout(()=>{
    let prize=1000, loss=-2000;
    if(upgrades.x2Prize>0){ prize*=Math.pow(2,upgrades.x2Prize); loss*=Math.pow(2,upgrades.x2Prize); }
    if(picks.includes(selectedRoom)){
      const room = document.querySelector(`.room[data-idx="${selectedRoom}"]`);
      room.classList.add('found');
      updCoins(loss);
    } else {
      const room = document.querySelector(`.room[data-idx="${selectedRoom}"]`);
      room.classList.add('safe');
      updCoins(prize);
    }
    selectedRoom=null; document.querySelectorAll('.room').forEach(r=>r.classList.remove('selected'));
    roundInProgress=false;
  }, delay + 700);
};

/* render miners both main-visible and modal */
let pendingMiner = null;
function renderMiners(){
  minersPanelVisible.innerHTML=''; modalMinersGrid.innerHTML='';
  minersData.forEach((m,i)=>{
    const st = minersState[i]; const price = m.p * Math.pow(2, st.count); const income = st.count>0? m.i * Math.pow(2, st.count-1):0;

    // main visible card
    const card = document.createElement('div'); card.className='miner-card';
    card.innerHTML = `<h4>${m.n}</h4><div class="income">+${format(income)}/hr</div><div style="display:flex;justify-content:space-between;width:100%;align-items:center;margin-top:8px"><div style="font-size:12px;color:var(--muted)">Lvl ${st.count}</div><div class="price">${format(price)}</div></div>`;
    card.onclick = ()=>{ if(coins>=price){ pendingMiner=i; showBuy(`${m.n} ‚Äî ${format(price)}`);} else alert('Not enough coins!'); };
    minersPanelVisible.appendChild(card);

    // modal card
    const mcard = document.createElement('div'); mcard.className='miner-card';
    mcard.innerHTML = `<h4>${m.n}</h4><div class="income">+${format(income)}/hr</div><div style="display:flex;justify-content:space-between;width:100%;align-items:center;margin-top:8px"><div style="font-size:12px;color:var(--muted)">Lvl ${st.count}</div><div class="price">${format(price)}</div></div>`;
    mcard.onclick = ()=>{ if(coins>=price){ pendingMiner=i; showBuy(`${m.n} ‚Äî ${format(price)}`);} else alert('Not enough coins!'); };
    modalMinersGrid.appendChild(mcard);
  });
}

/* buy confirm */
const buyConfirm = document.getElementById('buyConfirm');
function showBuy(text){ document.getElementById('buyText').textContent = text; buyConfirm.style.display='block'; }
document.getElementById('confirmBuy').onclick = ()=>{
  if(pendingMiner===null) return;
  const i = pendingMiner; const m = minersData[i]; const st = minersState[i]; const price = m.p * Math.pow(2, st.count);
  if(coins>=price){ coins -= price; st.count++; updCoins(0); save(); renderMiners(); } else alert('Not enough coins!');
  pendingMiner=null; buyConfirm.style.display='none';
};
document.getElementById('cancelBuy').onclick = ()=>{ pendingMiner=null; buyConfirm.style.display='none'; };

/* mining modal open/close (‚õè button) - opens modal that matches game dark premium */
const miningModal = document.getElementById('miningModal');
document.getElementById('miningBtn').onclick = ()=>{
  renderMiners(); miningModal.style.display='flex';
};
document.getElementById('closeMiningShop').onclick = ()=> miningModal.style.display='none';
miningModal.addEventListener('click', (e)=>{ if(e.target===miningModal) miningModal.style.display='none'; });

/* shop button toggles miners <-> upgrades */
const shopBtn = document.getElementById('shopBtn');
const upgradePanelEl = document.getElementById('upgradePanel');
shopBtn.onclick = ()=>{
  const minersVisible = minersPanelVisible.style.display !== 'none';
  if(minersVisible){
    minersPanelVisible.style.display='none';
    upgradePanelEl.style.display='flex';
    updUpg();
  } else {
    minersPanelVisible.style.display='flex';
    upgradePanelEl.style.display='none';
    renderMiners();
  }
};

/* info/profile simple handlers (kept minimal) */
document.getElementById('infoBtn').onclick = ()=> alert('How to play:\n1) –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–Ω–∞—Ç—É\n2) –ù–∞–∂–º–∏—Ç–µ üîç\n3) –ü–æ–±–µ–¥–∞/–ø–æ—Ç–µ—Ä—è –º–æ–Ω–µ—Ç\n4) –ü–æ–∫—É–ø–∞–π—Ç–µ –º–∞–π–Ω–µ—Ä–æ–≤/–∞–ø–≥—Ä–µ–π–¥—ã');
document.getElementById('profileBtn').onclick = ()=> alert('Profile: daily reward & quests (–≤ –¥–µ–º–æ)');

/* init UI */
coinsVal.textContent = format(coins);
updLv();
updUpg();
updIncome();
renderMiners();

/* update check1 timer display on upgrades panel when visible */
setInterval(()=> {
  if(upgradePanelEl.style.display!=='none'){
    const timer = document.querySelector('.upgrade .timer');
    // simpler: append timer to second upgrade element
    const items = upgradePanelEl.querySelectorAll('.upgrade');
    if(items[1]){
      const el = items[1].querySelector('.timer') || document.createElement('div');
      el.className='timer';
      if(check1Expire > Date.now()){
        el.textContent = '‚è≥ ' + Math.floor((check1Expire - Date.now())/1000) + 's';
      } else el.textContent = '';
      if(!items[1].contains(el)) items[1].appendChild(el);
    }
  }
}, 800);

</script>
</body>
</html>




















