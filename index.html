<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Майнеры</title>
<style>
  body {
    font-family: 'Inter', sans-serif;
    background: #f7f7f7;
    color: #222;
    margin: 0;
    padding: 0;
  }
  header {
    background: white;
    padding: 15px 25px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .balance {
    font-size: 18px;
    font-weight: 600;
  }
  .collect-btn {
    background: #222;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }
  .collect-btn:hover {
    background: #444;
  }
  .container {
    max-width: 800px;
    margin: 30px auto;
    padding: 0 20px;
  }
  .miner {
    background: white;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }
  .miner h3 {
    margin: 0;
    font-size: 18px;
  }
  .miner p {
    margin: 3px 0;
    font-size: 14px;
    color: #555;
  }
  .buy-btn {
    background: #007aff;
    color: white;
    border: none;
    padding: 10px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }
  .buy-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
  }
</style>
</head>
<body>

<header>
  <div class="balance">Баланс: <span id="balance">0</span> TON</div>
  <button class="collect-btn" onclick="collectProfit()">Собрать прибыль</button>
</header>

<div class="container" id="miners"></div>

<script>
const minersData = [
  {name: "Mini Miner", price: 1, income: 0.01},
  {name: "Basic Miner", price: 3, income: 0.05},
  {name: "Smart Miner", price: 6, income: 0.12},
  {name: "Turbo Miner", price: 10, income: 0.25},
  {name: "Ultra Miner", price: 20, income: 0.55},
  {name: "Power Miner", price: 40, income: 1.2},
  {name: "Quantum Miner", price: 80, income: 2.8},
  {name: "Infinity Miner", price: 150, income: 5.5},
  {name: "Titan Miner", price: 300, income: 12},
  {name: "God Miner", price: 600, income: 25}
];

let balance = parseFloat(localStorage.getItem('balance')) || 0;
let minersOwned = JSON.parse(localStorage.getItem('minersOwned')) || Array(10).fill(0);
let lastCollect = parseInt(localStorage.getItem('lastCollect')) || Date.now();

function saveData() {
  localStorage.setItem('balance', balance.toFixed(4));
  localStorage.setItem('minersOwned', JSON.stringify(minersOwned));
  localStorage.setItem('lastCollect', lastCollect);
}

function renderMiners() {
  const container = document.getElementById('miners');
  container.innerHTML = '';
  minersData.forEach((m, i) => {
    const div = document.createElement('div');
    div.className = 'miner';
    div.innerHTML = `
      <div>
        <h3>${m.name}</h3>
        <p>Цена: ${m.price} TON</p>
        <p>Доход: ${m.income} TON/ч</p>
        <p>Владение: ${minersOwned[i]} шт.</p>
      </div>
      <button class="buy-btn" onclick="buyMiner(${i})">Купить</button>
    `;
    container.appendChild(div);
  });
  updateBalance();
}

function buyMiner(i) {
  const miner = minersData[i];
  if (balance >= miner.price) {
    balance -= miner.price;
    minersOwned[i]++;
    saveData();
    renderMiners();
  } else {
    alert('Недостаточно средств!');
  }
}

function calculateProfit() {
  let totalIncome = 0;
  minersData.forEach((m, i) => totalIncome += m.income * minersOwned[i]);
  const hoursPassed = (Date.now() - lastCollect) / 3600000;
  return totalIncome * hoursPassed;
}

function collectProfit() {
  const profit = calculateProfit();
  balance += profit;
  lastCollect = Date.now();
  saveData();
  renderMiners();
  alert(Ты собрал ${profit.toFixed(3)} TON);
}

function updateBalance() {
  document.getElementById('balance').innerText = balance.toFixed(3);
}

renderMiners();
updateBalance();
</script>

</body>
</html>
